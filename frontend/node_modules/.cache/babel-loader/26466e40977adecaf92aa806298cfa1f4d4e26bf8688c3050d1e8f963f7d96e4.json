{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data,adminLoginsResponse,adminLogins,isAdminLogin;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post('http://localhost:3000/api/login',{email:email,password:password});case 4:response=_context.sent;data=response.data;localStorage.setItem('token',data.token);localStorage.setItem('email',email);// save the user's email in local storage\nonLogin(email,password);// Get the list of admin logins from the admin table\n_context.next=11;return axios.get('http://localhost:3000/admin');case 11:adminLoginsResponse=_context.sent;adminLogins=adminLoginsResponse.data;// Check if the entered email and password match an admin login\nisAdminLogin=adminLogins.some(function(adminLogin){return adminLogin.email===email;});if(isAdminLogin){navigate('/dashboard',{replace:true});}else{navigate('/profile');}_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](1);console.error(_context.t0);// Display error message to the user\ncase 20:case\"end\":return _context.stop();}},_callee,null,[[1,17]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();//return to home page \"/\"\nvar goBack=function goBack(){navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);},className:\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",autoComplete:\"current-password\",required:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"Sign in\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:goBack,type:\"button\",className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"create new account\"})})]})})})]});}export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","navigate","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","adminLoginsResponse","adminLogins","isAdminLogin","wrap","_callee$","_context","prev","next","preventDefault","post","sent","localStorage","setItem","token","get","some","adminLogin","replace","t0","console","error","stop","_x","apply","arguments","goBack","className","children","onSubmit","htmlFor","id","name","type","autoComplete","required","value","onChange","target","to","onClick"],"sources":["C:/Users/firas halouani/Desktop/design/Tadreex/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link , useNavigate} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction Login({onLogin}) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:3000/api/login', { email, password });\r\n      const data = response.data;\r\n      localStorage.setItem('token', data.token);\r\n      localStorage.setItem('email', email); // save the user's email in local storage\r\n      onLogin(email, password);\r\n\r\n      // Get the list of admin logins from the admin table\r\n      const adminLoginsResponse = await axios.get('http://localhost:3000/admin');\r\n      const adminLogins = adminLoginsResponse.data;\r\n\r\n      // Check if the entered email and password match an admin login\r\n      const isAdminLogin = adminLogins.some((adminLogin) => adminLogin.email === email );\r\n\r\n      if (isAdminLogin) {\r\n        navigate('/dashboard',{ replace:true });\r\n      } else {\r\n        navigate('/profile');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      // Display error message to the user\r\n    }\r\n};\r\n\r\n  //return to home page \"/\"\r\n  const goBack = ()=>{\r\n    navigate('/')\r\n  }\r\n  \r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Sign in to your account</h2>\r\n      </div>\r\n\r\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email address\r\n              </label>\r\n              <div className=\"mt-1\">\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Password\r\n              </label>\r\n              <div className=\"mt-1\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  id=\"remember-me\"\r\n                  name=\"remember-me\"\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                  Remember me\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"text-sm\">\r\n                <Link to=\"#\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n                  Forgot your password?\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                Sign in\r\n              </button>\r\n            </div>\r\n            <div>\r\n              <button\r\n                onClick={goBack}\r\n                type=\"button\"\r\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                create new account\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Login\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}