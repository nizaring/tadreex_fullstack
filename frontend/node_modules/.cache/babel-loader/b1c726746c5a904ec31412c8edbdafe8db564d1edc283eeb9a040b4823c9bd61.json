{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/firas halouani/Desktop/design/Tadreex/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,Fragment}from\"react\";import axios from\"axios\";import\"tailwindcss/tailwind.css\";import{useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CompanyDetail=function CompanyDetail(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),courses=_useState2[0],setCourses=_useState2[1];var _useParams=useParams(),id=_useParams.id;//afficher les formations acheter par cette entreprise\nuseEffect(function(){axios.get(\"http://localhost:3000/company/\".concat(id,\"/courses\")).then(function(response){setCourses(response.data);}).catch(function(error){return console.error(error);});},[id]);//retourner à la page précedente\nvar navigate=useNavigate();var goToDashboard=function goToDashboard(){navigate(\"/dashboard/account\");};//pour activer boutton et modifier la valeur de inprogreess to true\nvar updateInProgress=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(courseId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.put(\"http://localhost:3000/company/\".concat(id,\"/cours/\").concat(courseId),{inProgress:true});case 3:setCourses(courses.map(function(course){return course.course_id===courseId?_objectSpread(_objectSpread({},course),{},{inProgress:true}):course;}));_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function updateInProgress(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Nom de formation\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Etat\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:courses.map(function(course){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:course.title})}),/*#__PURE__*/_jsx(\"td\",{children:course.inProgress?/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 bg-gray-400 text-white font-bold py-2 px-4 rounded cursor-not-allowed\",disabled:true,children:\"terminer\"}):/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\",onClick:function onClick(){return updateInProgress(course.course_id);},children:\"Activer\"})})]},course.course_id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:goToDashboard,className:\"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",children:\"Go back\"})})]});};export default CompanyDetail;","map":{"version":3,"names":["React","useState","useEffect","Fragment","axios","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","CompanyDetail","_useState","_useState2","_slicedToArray","courses","setCourses","_useParams","id","get","concat","then","response","data","catch","error","console","navigate","goToDashboard","updateInProgress","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","courseId","wrap","_callee$","_context","prev","next","put","inProgress","map","course","course_id","_objectSpread","t0","stop","_x","apply","arguments","children","className","scope","title","disabled","onClick"],"sources":["C:/Users/firas halouani/Desktop/design/Tadreex/frontend/src/components/Admin/account/CompanyDetails.js"],"sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"tailwindcss/tailwind.css\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\nconst CompanyDetail = () => {\r\n  const [courses, setCourses] = useState([]);\r\n\r\n  const { id } = useParams();\r\n\r\n  //afficher les formations acheter par cette entreprise\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost:3000/company/${id}/courses`)\r\n      .then((response) => {\r\n        setCourses(response.data);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, [id]);\r\n\r\n  //retourner à la page précedente\r\n  const navigate = useNavigate();\r\n  const goToDashboard = () => {\r\n    navigate(\"/dashboard/account\");\r\n  };\r\n\r\n  //pour activer boutton et modifier la valeur de inprogreess to true\r\n  const updateInProgress = async (courseId) => {\r\n    try {\r\n      await axios.put(\r\n        `http://localhost:3000/company/${id}/cours/${courseId}`,\r\n        { inProgress: true }\r\n      );\r\n      setCourses(\r\n        courses.map((course) =>\r\n          course.course_id === courseId\r\n            ? { ...course, inProgress: true }\r\n            : course\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <table className=\"min-w-full divide-y divide-gray-200\">\r\n        <thead className=\"bg-gray-50\">\r\n          <tr>\r\n            <th\r\n              scope=\"col\"\r\n              className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n            >\r\n              Nom de formation\r\n            </th>\r\n            <th\r\n              scope=\"col\"\r\n              className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n            >\r\n              Etat\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n          {courses.map((course) => (\r\n            <tr key={course.course_id}>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-gray-900\">{course.title}</div>\r\n              </td>\r\n              <td>\r\n                {course.inProgress ? (\r\n                  <button\r\n                    className=\"mt-2 bg-gray-400 text-white font-bold py-2 px-4 rounded cursor-not-allowed\"\r\n                    disabled\r\n                  >\r\n                    terminer\r\n                  </button>\r\n                ) : (\r\n                  <button\r\n                    className=\"mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\r\n                    onClick={() => updateInProgress(course.course_id)}\r\n                  >\r\n                    Activer\r\n                  </button>\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"flex justify-center mt-6\">\r\n        <button\r\n          onClick={goToDashboard}\r\n          className=\"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n        >\r\n          Go back\r\n        </button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default CompanyDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}